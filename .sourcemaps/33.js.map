{"version":3,"sources":["../../src/pages/my/update-mobile/update-mobile.module.ts","../../src/pages/my/update-mobile/update-mobile.ts"],"names":[],"mappings":"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","file":"33.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { UpdateMobilePage } from './update-mobile';\n\n@NgModule({\n  declarations: [\n    UpdateMobilePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(UpdateMobilePage),\n  ],\n  exports: [\n    UpdateMobilePage\n  ]\n})\nexport class UpdateMobilePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/my/update-mobile/update-mobile.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { HttpService, StorageService } from '../../../providers'\n\n/**\n * Generated class for the UpdateMobilePage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage({\n    name: 'my/updateMobile'\n})\n@Component({\n    selector: 'page-update-mobile',\n    templateUrl: 'update-mobile.html',\n})\nexport class UpdateMobilePage {\n\n    private model: any = {\n        phone: '',\n        code: ''\n    };\n\n    private user: any;\n\n    codeBtnTxt: string = '获取';\n    codeBtnColor: string = 'secondary';\n\n    constructor(\n        public navCtrl: NavController, \n        public navParams: NavParams,\n        private http: HttpService,\n        private storage: StorageService) {\n            \n    }\n\n    ionViewDidLoad() {\n        this.user = this.storage.read('user');\n        if(this.user) {\n            this.model.phone = this.user.phone || '';\n        }\n    }\n\n    sendCode() {\n        if(this.codeBtnColor == 'secondary') {\n            if (!this.model.phone) {\n                this.http.showError('手机号码不能为空');\n                return;\n            }\n            this.http.get('sms/vcode.do?phone=' + this.model.phone).subscribe((data: any) => {\n                let remainTime = data.remainTime || 120;\n                this.changeCodeBtnTxt(remainTime);\n            });\n        }\n    }\n\n    doUpdate() {\n        this.http.postFormData('school/updateMajorMemberPhone.do', this.model).subscribe((data: any) => {\n            this.user.phone = this.model.phone;\n            this.storage.write('user', this.user);\n            this.http.showError('更换手机号码成功');\n            this.navCtrl.pop();\n        });\n    }\n\n    changeCodeBtnTxt(time) {\n        if (time <= 0) {\n            this.codeBtnTxt = '获取';\n            this.codeBtnColor = 'secondary';\n        } else {\n            this.codeBtnTxt = time;\n            this.codeBtnColor = 'light';\n            setTimeout(() => {\n                this.changeCodeBtnTxt(time - 1);\n            }, 1000);\n        }\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/my/update-mobile/update-mobile.ts"],"sourceRoot":""}